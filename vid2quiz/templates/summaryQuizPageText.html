{% load mathfilters %}

<!doctype html>
<html lang="en">
  <head>
       <!-- Bootstrap meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>Summary and Quiz</title>

    <link rel = "stylesheet" href="/static/summaryQuizPage.css">
  </head>
<body>
    <div class="container">
      <div class="row video-summary">
        <div class="col-md-1"></div>
          <div class="summary col-md-6">

            <p>Text</p>
            <p id="textbody">
              {{text}}
            </p>

        </div>
        <script type="text/javascript">
          function highlightText(sentence){
            var textBody=document.getElementById("textbody").innerHTML;
            var bIndex = textBody.indexOf("<b>");
            if(bIndex!=-1){
              var sbIndex=textBody.indexOf("</b>");
              textBody=textBody.substring(0, bIndex)+textBody.substring(bIndex+3, sbIndex)+textBody.substring(sbIndex+4);
            }
            var textIndex = textBody.indexOf(sentence);
            if(textIndex!=-1){
              document.getElementById("textbody").innerHTML=textBody.substring(0,textIndex)+"<b>"+sentence+"</b>"+textBody.substring(textIndex+sentence.length);
            }

          }

        </script>

        <div class="summary col-md-4">
            <p>Summary</p>
            {% for part in summary %}
            <a href='' onclick="highlightText({{part.sentence}}); return false;">{{part.sentence}}</a>
            {% endfor %}
        </div>
          <div class="col-md-1"></div>
        </div>
        {% for question in gap %}
        <div class="row mc-container">
            <div class="col-md-3"></div>
            <div class="col-md-6">
                <div class="mc-card">
                    <form class="card question">
                        <p class="card-header">{{question.gap_sentence}}</p>
                        {% for answer in question.distractors %}
                          <div class="body">
                          <div class="row">
                          <div class="col-sm-2"></div>
                          <button class="btn btn-default col-sm-8 mc-choice" onclick="checkAnswer({{ forloop.parentloop.counter|mul:4|add:forloop.counter }}, {{ question.answer }}); return false">
                              <label class="sr-only" for="inlineFormInputGroup"></label>
                              <div class="input-group">
                              <div class="input-group-prepend">
                                <div class="input-group-text" id="choice{{ forloop.parentloop.counter|mul:4|add:forloop.counter }}">{{ forloop.counter }}</div>
                              </div>
                            <input class="form-control" id="choice-word{{ forloop.parentloop.counter|mul:4|add:forloop.counter }}" placeholder={{answer}} readonly>
                            </div>
                          </button>
                          </div>
                          </div>
                        {% endfor %}
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}

    </div>
<script>


    function checkAnswer(counter, answer){
        if(counter%4==answer){
          document.getElementById("choice"+counter).style.background="#00cc99";
          document.getElementById("choice"+counter).style.color="white";
          document.getElementById("choice-word"+counter).style.background="#00cc99";
          document.getElementById("choice-word"+counter).style.color="white";
        }
        else{
          document.getElementById("choice"+counter).style.background="#ff3333";
          document.getElementById("choice"+counter).style.color="white";
          document.getElementById("choice-word"+counter).style.background="#ff3333";
          document.getElementById("choice-word"+counter).style.color="white";
        }






    }
</script>
</body>
</html>
